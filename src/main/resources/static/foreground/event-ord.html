<!doctype html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Obrien - Organic Food HTML5 Template</title>
    <meta name="robots" content="noindex, follow">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Favicon -->


    <!-- CSS
	============================================ -->
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="static/css/bootstrap.min.css">
    <!-- FontAwesome -->
    <link rel="stylesheet" href="static/css/font.awesome.min.css">
    <!-- Ionicons -->
    <link rel="stylesheet" href="static/css/ionicons.min.css">
    <!-- Slick CSS -->
    <link rel="stylesheet" href="static/css/slick.min.css">
    <!-- Animation -->
    <link rel="stylesheet" href="static/css/animate.min.css">
    <!-- jQuery Ui -->
    <link rel="stylesheet" href="static/css/jquery-ui.min.css">
    <!-- Nice Select -->
    <link rel="stylesheet" href="static/css/nice-select.min.css">
    <!-- Magnific Popup -->
    <link rel="stylesheet" href="static/css/magnific-popup.css">

    <!-- Vendor & Plugins CSS (Please remove the comment from below vendor.min.css & plugins.min.css for better website load performance and remove css files from the above) -->

    <!-- <link rel="stylesheet" href="assets/css/vendor/vendor.min.css">
    <link rel="stylesheet" href="assets/css/plugins/plugins.min.css"> -->

    <!-- Main Style CSS (Please use minify version for better website load performance) -->
    <link rel="stylesheet" href="static/css/style.css">
    <!-- <link rel="stylesheet" href="assets/css/style.min.css"> -->
    <script src="./static/js/template.js"></script>
    
</head>
<style>
    select {
  width: 200px;
  height: 30px;
  font-size: 20px;
}
</style>
<body>

    <div class="contact-wrapper">
        <div id="header"></div>
        <!-- Breadcrumb Area Start Here -->
        <div class="breadcrumbs-area position-relative">
            <div class="container">
                <div class="row">
                    <div class="col-12 text-center">
                        <div class="breadcrumb-content position-relative section-content">
                            <h3 class="title-3">查詢報名賽事</h3>
                            <ul>
                                <li><a href="index.html">Home</a></li>
                                <li>查詢報名賽事</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Breadcrumb Area End Here -->
        <!-- Checkout Area Start Here -->
        <div class="checkout-area">
            <div class="container container-default-2 custom-container">
                <div class="row">
                    <div class="col-12">
                        <div class="coupon-accordion">

                            <div id="checkout-login" class="coupon-content">
                                <div class="coupon-info">
                                    <p class="coupon-text">Quisque gravida turpis sit amet nulla posuere lacinia. Cras
                                        sed est
                                        sit amet ipsum luctus.</p>
                                    <form action="#">


                                    </form>
                                </div>
                            </div>

                            <div id="checkout_coupon" class="coupon-checkout-content">
                                <div class="coupon-info">
                                    <form action="#">
                                        <p class="checkout-coupon">
                                            <input placeholder="Coupon code" type="text">
                                            <input class="coupon-inner_btn" value="Apply Coupon" type="submit">
                                        </p>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-6 col-12">

                        <div class="checkbox-form">
                            <h3>選擇賽事</h3>
                            <div class="row">
                                <label>賽事 <span class="required">*</span></label>
                                <div class="col-md-12"id="eventselect">
                           
                                </div>
                                <div class="col-md-6"style="display:none;">
                                    <div class="checkout-form-list">
                                        <label>會員編號 <span class="required">*</span></label>
                                        <input type="text" id="memNo" vaule="299"></input>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="checkout-form-list">
                                        <label>姓名 <span class="required">*</span></label>
                                        <input value="王曉明" type="text" id="memName">
                                    </div>
                                </div>


                            </div>
                            <div class="col-md-12">
                                <div class="checkout-form-list">
                                    <label>地址 <span class="required">*</span></label>
                                    <input value="home" type="text" id="memAddress">
                                </div>
                            </div>




                            <div class="col-md-6">
                                <div class="checkout-form-list">
                                    <label>Email Address <span class="required">*</span></label>
                                    <input value="tim.Gmail.com" type="email" id="memEmail">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="checkout-form-list">
                                    <label>手機號碼 <span class="required">*</span></label>
                                    <input value="0912555666" type="text" id="memPhone">
                                </div>
                            </div>
                            <div class="checkout-form-list"style="display:none;" >
                                <label for="booking-amount">報名人數上限</label>
                                <input id="booking-amount" type="number" disabled value="" class="form-control">
                            </div>
                            <div id="pricediv" class="checkout-form-list">
                                <label for="booking-amount">報名費用</label>
                                <input id="price"  readonly="readonly" type="number" value="" class="form-control">
                            </div>


                        </div>
<!--                         <div class="col-lg-6 col-12">-->
<!--                    <div class="your-order">-->
<!--                        <h3>你選擇的賽事報名</h3>-->
<!--                        <div class="your-order-table table-responsive">-->
<!--                            <table class="table">-->
<!--                               -->
<!--                                <tbody>-->
<!--                                    <tr class="cart_item">-->
<!--                                        <td class="cart-product-name">1<strong-->
<!--                                                class="product-quantity">-->
<!--                                                × 1</strong></td>-->
<!--                                        <td class="cart-product-total text-center"><span class="amount">NT100</span>-->
<!--                                        </td>-->
<!--                                    </tr> -->

<!--                         <tr class="order-total">-->
<!--                                       -->
<!--                                        </td>-->
<!--                                    </tr> -->
<!--                         </tfoot> -->
<!--                         </table> -->

<!--                         <div class="payment-method">-->
<!--                        <div class="payment-accordion">-->
<!--                            <div class="card">-->
<!--                                <div class="card-header" id="#payment-1">-->
<!--                                    <h5 class="panel-title mb-2">-->
<!--                                        <label>-->
<!--                                            <input type="radio" name="payment-method" value="transfer" checked>-->
<!--                                            轉帳匯款-->
<!--                                        </label>-->
<!--                                    </h5>-->
<!--                                </div>-->
<!--                                <div class="card-body mb-2 mt-2">-->
<!--                                    <p>請匯入：公司名稱：遊Game有限公司，帳號：0800555666</p>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                            <div class="card">-->
<!--                                <div class="card-header" id="#payment-2">-->
<!--                                    <h5 class="panel-title mb-2">-->
<!--                                        <label>-->
<!--                                            <input type="radio" name="payment-method" value="creditcard">-->
<!--                                            信用卡付款-->
<!--                                        </label>-->
<!--                                    </h5>-->
<!--                                </div>-->
<!--                                <div class="card-body mb-2 mt-2">-->
<!--                                    <p>持卡人：</p>-->
<!--                                    -->
<!--                                    <input type="text" name="expiration" id="expiration">-->
<!--                                    <p>末三碼驗證：</p>-->
<!--                                    <input type="text" name="cvv" id="cvv">-->
<!--                                </div>-->
<!--                            </div>-->
<!--                            <div class="card">-->
<!--                                <div class="card-header" id="#payment-3">-->
<!--                                    <h5 class="panel-title mb-2">-->
<!--                                        <label>-->
<!--                                            <input type="radio" name="payment-method" value="instore">-->
<!--                                            到店後繳費給工作人員-->
<!--                                        </label>-->
<!--                                    </h5>-->
<!--                                </div>-->
<!--                                <div class="card-body mb-2 mt-2">-->
<!--                                    <p>請到店後繳費給工作人員</p>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div> -->

                        <div  id="sendevent" class="order-button-payment">
                            <input value="送出報名" type="submit" onclick=send()>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
    </div>
    <!-- Checkout Area End Here -->
    <!-- Support Area Start Here -->
    <div id="support"></div>
    <!-- Support Area End Here -->
    <!-- Footer Area Start Here -->
    <div id="footer"></div>
    <!-- Footer Area End Here -->
    </div>

    <!-- JS
============================================ -->

    <!-- jQuery JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <!-- jQuery Migrate JS -->
    <script src="static/js/jquery-migrate-3.3.2.min.js"></script>
    <!-- Modernizer JS -->
    <script src="static/js/modernizr-2.8.3.min.js"></script>
    <!-- Bootstrap JS -->
    <script src="static/js/bootstrap.bundle.min.js"></script>
    <!-- Slick Slider JS -->
    <script src="static/js/slick.min.js"></script>
    <!-- Countdown JS -->
    <script src="static/js/jquery.countdown.min.js"></script>
    <!-- Ajax JS -->
    <script src="static/js/jquery.ajaxchimp.min.js"></script>
    <!-- Jquery Nice Select JS -->
    <script src="static/js/jquery.nice-select.min.js"></script>
    <!-- Jquery Ui JS -->
    <script src="static/js/jquery-ui.min.js"></script>
    <!-- jquery magnific popup js -->
    <script src="static/js/jquery.magnific-popup.min.js"></script>

    <!-- Main JS -->
    <script src="static/js/main.js"></script>
    <script>
       
        event=document.getElementById('eventselect')
        fetch('/event/ls-event')
        .then(resp => resp.json())
         .then(list=> { 
            const selectElement = document.createElement('select');
            selectElement.setAttribute("id","eventNo")
            selectElement.setAttribute('onchange','pricechange()')
            const optionElement = document.createElement('option');
                optionElement.value = null;
                optionElement.textContent = "請選項目";
                selectElement.appendChild(optionElement);
            for(let events of list){ if(events.eventStatus!=0){
                const optionElement = document.createElement('option');
                optionElement.value = events.eventNo;
                optionElement.textContent = events.eventName;
                selectElement.appendChild(optionElement);
                event.appendChild(selectElement);
            }
        }
    })
   function pricechange(){
     let no =document.getElementById('eventNo').value;
     if(no=="null")
     {document.getElementById('pricediv').setAttribute('style','display: none')
     document.getElementById('sendevent').setAttribute('style','display: none')
     }else{
        datas={
            eventNo: no
        }
        $.post('/event/selecteventone',{
            eventNo:no
        }).then(function(response){document.getElementById('price').setAttribute('value',response.eventFee);
        console.log(response.eventFee)
        document.getElementById('pricediv').setAttribute('style','display: block')
        document.getElementById('sendevent').setAttribute('style','display: block')
             });
    }
   }
        function send() {
            let a = document.querySelector('#eventNo').value
            let b = 200
            let c = document.querySelector('#memName').value
            let d = document.querySelector('#memAddress').value
            let e = document.querySelector('#memEmail').value
            let f = document.querySelector('#memPhone').value
            data = {
                eventno: a,
                memNo: b,
                memChecked: 0,
                memName: c,
                memAddress: d,
                memEmail: e,
                memPhone: f,
                enevtStatus: 0,
            }

            let event = confirm('確定報名');

            if (event) {
                $.ajax({
                    url: "/eventord/insert",
                    type: "post",
                    data: JSON.stringify(data),
                    dataType: 'json',
                    contentType: "application/json; charset=utf-8"
                })
            } else {
                alert('請在報名一次');
            }
        }
        console.log(0)
    // $.post("http://localhost:8080/eventord/insert",data);
    document.getElementById('pricediv').setAttribute('style','display: none')
    document.getElementById('sendevent').setAttribute('style','display: none')
    </script>
</body>

</html>